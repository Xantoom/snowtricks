{% extends 'layout/base.html.twig' %}

{% block javascripts %}
	{{ importmap('load-more') }}
	{{ importmap('home') }}
{% endblock %}

{% block stylesheets %}
	<style>
		/* Adjust banner height to account for navbar */
		.banner {
			position: relative;
			height: calc(100vh - 60px); /* Subtract navbar height */
			min-height: 450px; /* Ensure minimum height on small screens */
			overflow: hidden;
			border-radius: 0;
			margin-bottom: 0;
		}

		.banner-image {
			width: 100%;
			height: 100%;
			object-fit: cover;
			filter: brightness(0.7);
			transition: transform 0.3s ease-out;
		}

		.banner-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.6));
		}

		/* Move scroll button higher up for better visibility */
		.scroll-down-btn {
			position: absolute;
			bottom: 80px;
			right: 30px;
			width: 60px;
			height: 60px;
			background-color: rgba(255, 255, 255, 0.9);
			border-radius: 50%;
			display: flex;
			justify-content: center;
			align-items: center;
			color: #333;
			font-size: 1.5rem;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
			transition: all 0.3s ease;
			z-index: 10;
			text-decoration: none;
			animation: bounce 2s infinite;
		}

		/* Add bounce animation to draw attention to the button */
		@keyframes bounce {
			0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
			40% { transform: translateY(-10px); }
			60% { transform: translateY(-5px); }
		}

		.scroll-down-btn:hover {
			background-color: #fff;
			color: #007bff;
			animation: none;
			transform: translateY(-3px);
			box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
		}

		.banner-subtext {
			font-size: 1.5rem;
			font-weight: 300;
			text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
		}

		.scroll-down-btn {
			position: absolute;
			bottom: 30px;
			right: 30px;
			width: 60px;
			height: 60px;
			background-color: rgba(255, 255, 255, 0.9);
			border-radius: 50%;
			display: flex;
			justify-content: center;
			align-items: center;
			color: #333;
			font-size: 1.5rem;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
			transition: all 0.3s ease;
			z-index: 10;
			text-decoration: none;
		}

		.scroll-down-btn:hover {
			background-color: #fff;
			color: #007bff;
			transform: translateY(-3px);
			box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
		}

		/* Existing styles for cards */
		.trick-card {
			transition: all 0.3s ease;
			border: none;
			border-radius: 12px;
			overflow: hidden;
		}

		.trick-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2) !important;
		}

		.trick-image {
			height: 220px;
			object-fit: cover;
			transition: transform 0.5s;
		}

		.trick-card:hover .trick-image {
			transform: scale(1.05);
		}

		.btn-load-more {
			padding: 12px 30px;
			font-weight: 600;
			border-radius: 50px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transition: all 0.3s;
		}

		.btn-load-more:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
		}

		.card-title {
			font-size: 1.2rem;
			font-weight: 600;
			margin-bottom: 0;
		}

		.action-buttons .btn {
			width: 38px;
			height: 38px;
			padding: 0;
			line-height: 36px;
			border-radius: 50%;
			margin-left: 5px;
		}
	</style>
{% endblock %}

{% block title %}Home{% endblock %}

{% block body %}
	<!-- Banner -->
	<div class="banner">
		<img src="{{ bannerImgLink }}" alt="Snowboard banner" class="banner-image">
		<div class="banner-overlay"></div>
		<div class="position-absolute top-50 start-50 translate-middle text-center text-white">
			<h1 class="banner-text mb-3">Welcome to the SnowTricks Community</h1>
			<p class="banner-subtext">Share and discover amazing snowboarding tricks</p>
		</div>
		<a href="#tricks-section" class="scroll-down-btn">
			<i class="fas fa-chevron-down"></i>
		</a>
	</div>

	<!-- Cards -->
	<div id="tricks-section" class="container my-5" style="max-width: 1400px;">
		<div class="row row-cols-1 row-cols-md-2 row-cols-xl-4 g-4 justify-content-center tricks-container">
			{% for trick in tricks %}
				<div class="col">
					<div class="card h-100 shadow trick-card">
						<div class="card-img-wrapper overflow-hidden">
							<img src="https://picsum.photos/300"
							     class="card-img-top trick-image"
							     alt="{{ trick.name }}">
						</div>
						<div class="card-body d-flex justify-content-between align-items-center py-3">
							<h3 class="card-title">{{ trick.name }}</h3>
							{% if app.user %}
							{% endif %}
							<div class="action-buttons">
								<button class="btn btn-outline-success btn-edit-trick" data-trick-id="{{ trick.id }}">
									<i class="fas fa-edit"></i>
								</button>
								<button class="btn btn-outline-danger btn-delete-trick" data-trick-id="{{ trick.id }}">
									<i class="fas fa-trash"></i>
								</button>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>

	<!-- Load More Button -->
	{% if nbTricks > 15 %}
	{% endif %}
	<div class="container text-center mb-5 mt-4">
		<button class="btn btn-primary btn-lg btn-load-more" data-page="2">
			<i class="fas fa-sync-alt me-2"></i>Load More
		</button>
	</div>

	<!-- Delete Confirmation Modal -->
	{{ include('home/_modal_delete_trick.html.twig') }}
{% endblock %}
